---
import '../styles/global.css'

const links = [
  { href: '/',        label: 'Home' },
  { href: '/blog/',   label: 'Blog' },
  { href: '/about/',  label: 'About' },
  {href: '/info/', label: 'Info'}
];

const { pathname } = Astro.url;

const currentPageUrl = Astro.url.href;

const isActive = (href: string) => {
  if (href === '/') return pathname === '/';
  return pathname.startsWith(href);
};

---

  <header id="header" class="site-header border-b">
    <div class="container mx-auto flex items-center justify-between p-4">
      <a class="flex items-center gap-4" href="/index.html" aria-label="Home">
        {
          () => {
            if (currentPageUrl != "/") {
              return (<img src="../icon6.png" alt="サイトアイコン" class="h-12 w-12" /> 
                <img src="../sugimoto.png" alt="Sugimoto ロゴ" class="h-8" />
              )
            } else {
              return (<img src="icon6.png" alt="サイトアイコン" class="h-12 w-12" />
                <img src="sugimoto.png" alt="Sugimoto ロゴ" class="h-8" />
              )
            }
          }
        }
      </a>

      <nav class="nav" aria-label="メインナビゲーション">
        <ul class="site-nav-list flex items-center gap-3 text-lg p-2">
          {links.map(link => (
        <li>
          <a
            href={link.href}
            class={
              isActive(link.href)
                ? 'text-sky-300 border-sky-400'
                : 'text-slate-400 border-transparent hover:text-slate-100'
                }
                >
                {link.label}
              </a>
            </li>
          ))}
        </ul>
      </nav>
    </div>
  </header>

<script is:inline>
  const btn = document.getElementById('navToggle');
  const menu = document.getElementById('navMenu');
  if (btn && menu) {
    const toggle = () => {
      const isOpen = !menu.classList.contains('hidden');
      menu.classList.toggle('hidden');
      btn.setAttribute('aria-expanded', String(!isOpen));
    };
    btn.addEventListener('click', toggle);
    // Close on link click and Escape
    menu.querySelectorAll('a').forEach(a => a.addEventListener('click', () => menu.classList.add('hidden')));
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') menu.classList.add('hidden');
    });
  }
</script>

<style>
  .nav-link--active {
    color: #f9fafb;
    border-bottom-color: #38bdf8; /* ハイライト色 */
    font-weight: 600;
  }
</style>